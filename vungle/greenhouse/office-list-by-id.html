<!doctype html>
<html>
	<head>
		<title>Greenhouse</title>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap-theme.min.css">
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>
		
		<style type="text/css">
		html, body {
			background-color: #000;
			color: #ccc;
			}	
		a {
			color:#2f90ce;
		}
		.icon {
			background: #ccc;
			display: block;
			margin: 10px;
			padding: 20px;
		}
		.bldg {
			
			margin: 10px;
			
		}
		</style>
	</head>
	
<body>

	
	
	<script>
		var greenuri = 'https://api.greenhouse.io/v1/boards/vungle/embed/'
		
		var jobs = greenuri+'jobs';
		var offices = greenuri+'offices';
		var departments = greenuri+'departments';
		
		$.ajax({ // get offices object
		    url: offices,
		    type: "GET",
		    dataType: 'jsonp',
		    cache: true,
		    data: {content: true}, //loads job content into new object
		    context: document.body,
		    success: function (data, status, error) {
		      console.log('success', data);
		      
		     
		      /*
		      for (i = 0; i < data.offices.length; i++){
			  	
			  	 var id = data.offices[i].id;
			      
			      if (id != 0) { // if office has a name
			      	var location = data.offices[i].name;
			      	var locationurl = location.toLowerCase().replace(/\s+/g, ''); //office name url for href
			      	//console.log(locationurl);
			      	//console.log(location);
			      	
			      	//$('#offices').append('<a href="'+locationurl+'"><li class="col-xs-4 col-md-2 location"><div class="icon"><img class="img-responsive" src="img/'+locationurl+'.svg"><br />'+location+'</div></li></a>')
			      	
			      	
			      }
			      
				  		
		      }
		      */
				

				
			  	// http://jsfiddle.net/xsM5s/16/
				
				var theOffices = data.offices;
				
				var byID = theOffices.slice(0);
				byID.sort(function(a,b){
					return a.id - b.id;
				});
				

				for (i = 0; i < byID.length; i++) {
					//console.log(byID[i].name);
					var id = byID[i].id;
					
					if (id != 0){
						var location = byID[i].name;
						var locationurl = location.toLowerCase().replace(/\s+/g, ''); //office name url for href
						var locationquery = 'singleoffice.html?office='+locationurl;
						
						$('#offices').append('<a href="'+locationquery+'"><li class="col-xs-4 col-md-2 location"><div class="bldg"><img class="img-responsive" src="img/'+locationurl+'.svg"><br />'+location+'</div></li></a>')
						
					};
					
				};
			
					
		

	
		    },
		    error: function (data, status, error) {
		      console.log('error', data, status, error);
		    }
		});
		
		
		
		
		$.ajax({ // get dept object
		    url: departments,
		    type: "GET",
		    dataType: 'jsonp',
		    cache: true,
		    data: {content: true}, //loads job content into new object
		    context: document.body,
		    success: function (data, status, error) {
		      console.log('success', data);
		      
		     
		      
		      for (i = 0; i < data.departments.length; i++){
			  	
			  	 var id = data.departments[i].id;
			      
			      if (id != 0) { // if office has a name
			      	var dept = data.departments[i].name;
			      	var depturl = dept.toLowerCase().replace(/\s+/g, ''); //office name url for href
			      	//console.log(locationurl);
			      	//console.log(location);
			      	
			      	$('#departments').append('<a href="job-list-by-department.html?id='+id+'"><li style="min-height: 100px" class="col-xs-6 col-md-4 location"><div class="icon">'+dept+'</div></li></a>')
			      	
			      	//console.log(location);
			      }
		      }
		      
		      

			
			
			
				
			
		    },
		    error: function (data, status, error) {
		      console.log('error', data, status, error);
		    }
		    // ajax	
		});
		
	</script>
	
	<div class="container">
			<ul id="offices" class="row list-inline text-center">
				<!-- from greenhuse api -->
			</ul><!-- /row -->
			<hr />
			<ul id="departments" class="row list-inline text-center">
				<!-- from greenhuse api -->
			</ul><!-- /row -->
			
			
			<hr />
			
			<ul id="joblist">
				
			</ul>
			
			
	</div><!-- /container -->
	
	

</body>
</html>